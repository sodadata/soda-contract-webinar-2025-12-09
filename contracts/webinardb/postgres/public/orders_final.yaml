dataset: webinardb/postgres/public/orders
checks:
  - schema: {}
  - failed_rows:
      name: shipping_date after order_date
      expression: shipping_date <= order_date
      threshold:
        must_be: 0
columns:
  - name: order_id
    data_type: text
    checks:
      - missing:
      - invalid:
          name: order_id UUID v4
          valid_format:
            name: uuid_v4
            regex: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
  - name: customer_id
    data_type: text
    checks:
      - missing:
      - invalid:
          name: customer_id UUID v4
          valid_format:
            name: uuid_v4
            regex: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
  - name: order_date
    data_type: date
    checks:
      - missing:
  - name: shipping_date
    data_type: date
    checks:
      - missing:
  - name: shipping_address
    data_type: text
    checks:
      - missing:
      - invalid:
          name: shipping_address reasonable length
          valid_min_length: 5
          valid_max_length: 200
  - name: amount
    data_type: numeric
    checks:
      - missing:
      - invalid:
          name: amount must be non-negative
          valid_min: 0
  - name: status
    data_type: text
    checks:
      - missing:
      - invalid:
          name: status must be valid
          valid_values:
            - PENDING
            - SHIPPED
            - CANCELLED
  - name: country_code
    data_type: text
    checks:
      - missing:
      - invalid:
          name: country_code 2-letter uppercase
          valid_format:
            name: A-ZA-Z 2 letters
            regex: ^[A-Z]{2}$
